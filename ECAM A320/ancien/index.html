<!DOCTYPE html>
<html lang="ENG">
<head>
<meta charset="UTF-8">
<title>ECAM Trainer</title>

<style>
/* ===== GLOBAL ===== */
body {
  margin: 0;
  font-family: Arial, Helvetica, sans-serif;
  background: #0a0e1a;
  color: #ffffff;
}

.header {
  background: #1a1f2e;
  border-bottom: 2px solid #ffffff;
  padding: 8px 15px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 20px;
  flex: 0 0 auto;
  position: relative;
}

.header-center {
  flex: 1;
  text-align: center;
  font-size: 11px;
  color: #999;
}

.header-left {
  display: flex;
  align-items: center;
  gap: 20px;
  position: absolute;
  left: 15px;
}

.header-title {
  margin: 0;
  font-size: 18px;
  font-weight: bold;
}

.header-aircraft {
  font-size: 14px;
}

.header-status {
  color: #999;
  font-weight: normal;
  font-size: 9px;
  position: absolute;
  right: 15px;
}

.app {
  display: flex;
  width: 100%;
  height: calc(100vh - 100px);
  padding: 8px;
  box-sizing: border-box;
  gap: 8px;
  flex-direction: column;
}

.footer {
  background: #1a1f2e;
  border-top: 2px solid #ffffff;
  padding: 8px 15px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  flex: 0 0 auto;
}

.footer-left {
  font-size: 11px;
  color: #999;
}

.footer-btn {
  background: #1a1f2e;
  border: 2px solid #ffffff;
  color: #ffffff;
  padding: 8px 16px;
  cursor: pointer;
  font-size: 12px;
  font-weight: bold;
  text-transform: uppercase;
  transition: 0.5s;
  background-size: 200% auto;
}

.footer-btn:hover {
  background: #ffffff;
  color: #0a0e1a;
  box-shadow: 0 0 20px rgba(255, 255, 255, 0.6);
}

/* ===== MODAL ===== */
.modal {
  display: none;
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.8);
}

.modal-content {
  background-color: #1a1f2e;
  margin: 5% auto;
  padding: 20px;
  border: 2px solid #ffffff;
  width: 80%;
  max-width: 700px;
  max-height: 80vh;
  overflow-y: auto;
  border-radius: 0;
}

.modal-header {
  font-size: 18px;
  font-weight: bold;
  margin-bottom: 15px;
  border-bottom: 2px solid #ffffff;
  padding-bottom: 10px;
}

.modal-text {
  font-size: 13px;
  line-height: 1.6;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.modal-close {
  background: #ffffff;
  border: 2px solid #ffffff;
  color: #0a0e1a;
  padding: 10px 20px;
  cursor: pointer;
  font-weight: bold;
  margin-top: 15px;
  transition: 0.3s;
}

.modal-close:hover {
  background: #e0e0e0;
}

/* ===== FAILURE MODAL ===== */
#failure-modal {
  display: none;
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.8);
}

#failure-modal-content {
  background-color: #1a1f2e;
  margin: 5% auto;
  padding: 20px;
  border: 2px solid #ffffff;
  width: 80%;
  max-width: 700px;
  max-height: 80vh;
  overflow-y: auto;
  border-radius: 0;
}

#failure-modal-header {
  font-size: 18px;
  font-weight: bold;
  margin-bottom: 15px;
  border-bottom: 2px solid #ffffff;
  padding-bottom: 10px;
}

#failure-modal-body {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
}

.failure-btn {
  background: linear-gradient(to right, #0a0e1a 0%, #1a1f2e 51%, #0a0e1a 100%);
  border: 2px solid #ffffff;
  color: #ffffff;
  padding: 12px;
  cursor: pointer;
  font-size: 11px;
  font-weight: bold;
  text-align: center;
  transition: 0.5s;
  background-size: 200% auto;
}

.failure-btn:hover {
  background-position: right center;
  color: #000000;
  text-decoration: none;
}

.left-side {
  display: flex;
  flex-direction: column;
  gap: 8px;
  flex: 1;
  overflow: hidden;
  width: 100%;
}

.title-top {
  margin: 0 0 15px 0;
  border: 2px solid #ffffff;
  padding: 10px;
  text-align: center;
  background: #1a1f2e;
  color: #ffffff;
  width: 250px;
  box-sizing: border-box;
  font-size: 14px;
  display: none;
}

/* ===== ECAM AREA ===== */
.ecam-area {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 10px;
  overflow-y: auto;
}

.ecam-screen {
  background: #000000;
  color: #00ff00;
  height: auto;
  width: 50%;
  flex: 1;
  border: 3px solid #00ff00;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 14px;
  font-weight: bold;
}

/* ===== CHAPTER LIST ===== */
.chapter-panel {
  width: 100%;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 4px;
  flex: 1;
}

.chapter-panel button {
  border: none;
  cursor: pointer;
}

.btn-grad {
  background-image: linear-gradient(to right, #0a0e1a 0%, #1a1f2e 51%, #0a0e1a 100%);
  margin: 0;
  padding: 0;
  text-align: center;
  text-transform: uppercase;
  transition: 0.5s;
  background-size: 200% auto;
  color: #ffffff;
  box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
  border-radius: 0px;
  border: 2px solid #ffffff;
  cursor: pointer;
  font-weight: bold;
  font-size: 12px;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.btn-grad:hover {
  background-position: right center;
  background: linear-gradient(to right, #ffffff 0%, #e0e0e0 51%, #ffffff 100%);
  color: #0a0e1a;
  box-shadow: 0 0 25px rgba(255, 255, 255, 0.8);
}

.btn-grad:hover {
  background-position: right center;
  color: #0a0e1a;
  text-decoration: none;
  box-shadow: 0 0 25px rgba(255, 255, 255, 0.8);
  background-image: linear-gradient(to right, #ffffff 0%, #e0e0e0 51%, #ffffff 100%);
}

/* ===== RIGHT PANEL ===== */
.right-panel {
  width: 350px;
  background: #0a0e1a;
  border: 2px solid #ffffff;
  padding: 8px;
  box-sizing: border-box;
  flex: 0 0 auto;
  overflow: hidden;
  display: none;
}


.right-panel h2 {
  margin-top: 0;
  margin-bottom: 30px;
  border: 2px solid #ffffff;
  padding: 15px;
  text-align: center;
  background: #1a1f2e;
}

.ecam-image {
  max-width: 100%;
  height: auto;
  margin-bottom: 12px;
  border: 2px solid #ffffff;
  display: block;
  max-height: 300px;
}

.note-box {
  border: 2px solid #00ff00;
  padding: 15px;
  background: #1a1f2e;
  font-size: 14px;
  color: #ffffff;
}

/* ===== PROCEDURE PAGE LAYOUT ===== */
.procedure-page {
  display: none;
  flex-direction: column;
  width: 100%;
  height: calc(100vh - 100px);
  box-sizing: border-box;
}

.procedure-controls {
  background: #1a1f2e;
  border-bottom: 2px solid #ffffff;
  padding: 10px;
  display: flex;
  justify-content: center;
  gap: 15px;
  flex: 0 0 auto;
}

.procedure-btn {
  background: #1a1f2e;
  border: 2px solid #ffffff;
  color: #00ff00;
  padding: 10px 20px;
  cursor: pointer;
  font-size: 12px;
  font-weight: bold;
  text-transform: uppercase;
  transition: 0.3s;
}

.procedure-btn:hover {
  background: #00ff00;
  color: #0a0e1a;
  box-shadow: 0 0 15px rgba(0, 255, 0, 0.6);
}

.procedure-content {
  display: flex;
  flex: 1;
  gap: 15px;
  padding: 15px;
  overflow: hidden;
}

.procedure-left {
  display: flex;
  flex-direction: column;
  gap: 15px;
  flex: 0 0 350px;
}

.ewd-container, .sd-container {
  flex: 1;
  border: 2px solid #ffffff;
  background: #000000;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.ewd-container img, .sd-container img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
}

.procedure-right {
  flex: 1;
  border: 2px solid #ffffff;
  background: #1a1f2e;
  padding: 15px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
}

.procedure-right h3 {
  margin-top: 0;
  margin-bottom: 15px;
  color: #00ff00;
  text-transform: uppercase;
  border-bottom: 2px solid #00ff00;
  padding-bottom: 10px;
}

.procedure-step {
  margin-bottom: 15px;
  padding: 10px;
  background: #0a0e1a;
  border-left: 3px solid #00ff00;
  color: #ffffff;
}

.procedure-step.completed {
  border-left-color: #00ff00;
  opacity: 0.6;
}

.procedure-step.active {
  border-left-color: #ff0000;
  box-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
}

.procedure-image-button {
  margin-top: 10px;
  padding: 8px;
  background: #00ff00;
  border: 2px solid #00ff00;
  color: #0a0e1a;
  cursor: pointer;
  font-weight: bold;
  text-transform: uppercase;
  transition: 0.3s;
}

.procedure-image-button:hover {
  background: #00cc00;
  box-shadow: 0 0 15px rgba(0, 255, 0, 0.8);
}

.procedure-image-button:disabled {
  background: #666666;
  border-color: #666666;
  color: #999999;
  cursor: not-allowed;
  opacity: 0.5;
}

/* ===== MASTER WARN / CAUT ===== */
.alerts {
  margin-top: 20px;
}

.alert {
  width: 120px;
  padding: 10px;
  margin-bottom: 10px;
  text-align: center;
  font-weight: bold;
  border: 2px solid #ffffff;
}

.master-warn {
  background: red;
  color: white;
}

.master-caut {
  background: orange;
  color: black;
}
</style>
</head>

<body>

<div class="header">
  <div class="header-left">
    <h1 class="header-title">ECAM TRAINER</h1>
    <div class="header-aircraft">Aircraft: A320F</div>
  </div>
  <div class="header-center"><span style="color: #ffffff; font-size: 13px; font-weight: bold;">Connection status:</span> <span style="color: #00ff00; font-size: 13px; font-weight: bold;">Connected</span></div>
  <div class="header-status">Last update: December 2025</div>
</div>

<div class="app">

  <!-- LEFT SIDE: TITLE, BUTTONS, PANEL -->
  <div class="left-side">
    <h2 class="title-top">Read ECAM</h2>

    <!-- CHAPTER BUTTONS -->
    <div class="chapter-panel" id="chapters"></div>

    <!-- RIGHT PANEL -->
    <div class="right-panel">
    </div>
  </div>

  <!-- RIGHT SIDE: ECAM IMAGES (COMMENTED OUT - UNCOMMENT TO SHOW)
  <div class="ecam-area">
      <div class="ECAM-panel">
    <img src="images/ecran principal/ECAM.tif.png" alt="ECAM" class="ecam-image">
    </div>
    <div class="SD-panel">
    <img src="images/ecran principal/SD.png" alt="ECAM" class="ecam-image">
    </div>
  </div>
  -->

</div>

<div class="footer">
  <button class="footer-btn" onclick="showLegal()">Legal Notice</button>
  <button class="footer-btn" onclick="showDisclaimer()">Disclaimer</button>
  <button class="footer-btn" onclick="showContact()">Contact</button>
</div>

<!-- PROCEDURE PAGE -->
<div class="procedure-page" id="procedure-page">
  <div class="procedure-controls">
    <button class="procedure-btn" onclick="goBackToMain()">⬅ RETURN</button>
    <button class="procedure-btn" onclick="replayAnimation()">⟲ REPLAY</button>
    <button class="procedure-btn" onclick="restartSequence()">⟳ RESTART</button>
  </div>
  
  <div class="procedure-content">
    <!-- LEFT SIDE: E/WD and SD -->
    <div class="procedure-left">
      <div class="ewd-container">
        <img id="ewd-image" src="" alt="E/WD Display">
      </div>
      <div class="sd-container">
        <img id="sd-image" src="" alt="System Display">
      </div>
    </div>
    
    <!-- RIGHT SIDE: PROCEDURE -->
    <div class="procedure-right">
      <h3 id="procedure-title">PROCEDURE</h3>
      <div id="procedure-steps-container">
        <!-- Steps will be inserted here by JavaScript -->
      </div>
    </div>
  </div>
</div>

<!-- MODALS -->
<div id="modal" class="modal">
  <div class="modal-content">
    <div class="modal-header" id="modal-header">Modal Title</div>
    <div class="modal-text" id="modal-body">Modal content here</div>
    <button class="modal-close" onclick="closeModal()">CLOSE</button>
  </div>
</div>

<!-- FAILURE MODAL -->
<div id="failure-modal">
  <div id="failure-modal-content">
    <div id="failure-modal-header">System</div>
    <div id="failure-modal-body"></div>
    <button class="modal-close" onclick="closeFailureModal()" style="margin-top: 15px; width: 100%;">CLOSE</button>
  </div>
</div>

<script>
/* ===== FAILURE DATA ===== */
const failures = {
  "A-ICE": ["A-ICE WING SYS FAULT", "A-ICE ENGINE SYS FAULT"],
  "AIR": [
    "AIR PACK 1 REGUL FAULT",
    "AIR PACK 1 OVHT",
    "AIR PACK 1 FAULT",
    "AIR L WING LEAK",
    "AIR ENG 2 BLEED LO TEMP"
  ],
  "APU": ["APU AUTO SHUT DOWN", "APU BLEED FAULT", "APU GEN FAULT"],
  "APU FIRE": ["APU FIRE DETECTED"],
  "AUTO FLT": [
    "AUTO FLT - A/THR OFF",
    "AUTO FLT - FAC 1 FAULT",
    "AUTO FLT - FAC 1+2 FAULT",
    "AUTO FLT - FCU 1 FAULT",
    "AUTO FLT - FCU 1+2 FAULT",
    "DUAL FMGC FAILURE",
    "AUTO FLT TCAS MODE FAULT"
  ],
  "AVNCS SMOKE": ["AVNCS SMOKE DETECTED"],
  "BLEED": [
    "BLEED A-ICE FAULT",
    "BLEED VALVE FAULT",
    "BLEED OVERPRESS",
    "BLEED UNAVAILABLE",
    "BLEED LO PR"
  ],
  "BRAKES": [
    "BRAKES SYS 1 FAULT",
    "BRAKES HOT (GND)",
    "BRAKES HOT (AIR)"
  ],
  "BRAKES-NWS": ["NWS FAULT", "NWS INOPERATIVE"],
  "CAB PR": [
    "CAB PR EXCESS CAB ALT",
    "CAB PR SYS 1+2 FAULT"
  ],
  "C/B": ["C/B FAULT", "C/B OPEN"],
  "COM": ["COM VHF 1 FAULT", "COM VHF 2 FAULT", "COM HF FAULT"],
  "COND": ["COND PACK FAULT", "COND OVERPRESSURE"],
  "CONFIG": ["CONFIG SYS FAULT"],
  "DATALINK": ["DATALINK FAULT"],
  "DOOR": ["DOOR AFT CARGO"],
  "ELEC": [
    "ELEC GEN 1 FAULT",
    "ELEC GEN 2 FAULT",
    "ELEC BAT FAULT",
    "ELEC AC BUS FAULT",
    "ELEC DC BUS FAULT",
    "ELEC AC ESS BUS FAULT",
    "ELEC GEN 1 LINE FAULT",
    "ELEC GEN 2 LINE FAULT",
    "ELEC APU GEN FAULT",
    "ELEC RAM AIR TURBINE FAULT",
    "ELEC BATTERY CHARGER FAULT",
    "ELEC STATIC INVERTER FAULT"
  ],
  "ENG": [
    "ENG 2 FIRE (IN FLIGHT)",
    "ENG 2 - OIL LO PR",
    "ENG 2 - EGT OVER LIMIT",
    "ENG 2 - EIU FAULT",
    "ENG 2 - FADEC FAULT",
    "ENG 2 - FAIL (NO DAMAGE)",
    "ENG 2 - FAIL (WITH DAMAGE)",
    "ENG 2 - OIL HI TEMP",
    "ENG 2 FIRE (ON GROUND)",
    "ENG 2 THR LEVER FAULT",
    "ENG FADEC A+B FAULT",
    "ENG 2 EIU FAULT",
    "ENG EFATO",
    "ENG 2 EGT OVER LIMIT"
  ],
  "F/CTL": [
    "F/CTL FLAP SYS 1 FAULT",
    "F/CTL FLAPS LOCKED",
    "F/CTL ELAC 1 FAULT",
    "F/CTL ELAC 1+2 FAULT",
    "F/CTL SEC 1 FAULT",
    "F/CTL SEC 2 FAULT",
    "F/CTL SEC 3 FAULT",
    "F/CTL SEC 1+2 FAULT",
    "F/CTL SEC 1+3 FAULT",
    "F/CTL SEC 2+3 FAULT",
    "F/CTL SEC 1+2+3 FAULT",
    "F/CTL ELAC 1 PITCH FAULT",
    "F/CTL L ELEV FAULT",
    "F/CTL L+R ELEV FAULT",
    "F/CTL STABILIZER JAM",
    "F/CTL SPD BRK STILL OUT"
  ],
  "FUEL": [
    "FUEL L INNER TK HI TEMP",
    "FUEL L TK PUMP 1+2 LO PR",
    "FUEL LEAK",
    "FUEL CENTER TK OVFL",
    "FUEL CROSSFEED VALVE FAULT"
  ],
  "FWS": ["FWS FAULT", "FWS INOPERATIVE"],
  "HYD": [
    "HYD G+Y SYS LO PR",
    "HYD G+B SYS LO PR",
    "HYD B+Y SYS LO PR",
    "HYD B RSVR LO AIR PR",
    "HYD G RSVR LO AIR PR",
    "HYD Y RSVR LO AIR PR",
    "HYD B RSVR OVHT",
    "HYD G RSVR OVHT",
    "HYD Y RSVR OVHT",
    "HYD B RSVR LO LVL",
    "HYD G RSVR LO LVL",
    "HYD Y RSVR LO LVL",
    "HYD B ELEC PUMP LO PR",
    "HYD G ENG 1 PUMP LO PR",
    "HYD Y ENG 2 PUMP LO PR",
    "HYD G LO PR (B ON RAT)",
    "HYD Y LO PR (G ON PTU)"
  ],
  "L/G": [
    "L/G GEAR NOT UPLOCKED",
    "L/G GEAR NOT DOWNLOCKED",
    "L/G LGCIU 1 FAULT",
    "L/G LGCIU 2 FAULT",
    "L/G LGCIU 1+2 FAULT",
    "L/G LGCIU 2 FAULT(GND RESET)"
  ],
  "MISC": ["MISC SYS FAULT"],
  "NAV": [
    "NAV GPWS FAULT",
    "NAV RA 1+2 FAULT",
    "NAV ADR 1 FAULT",
    "NAV ADR 2 FAULT",
    "NAV ADR 3 FAULT",
    "NAV ADR 1+2 FAULT",
    "NAV ADR 1+3 FAULT",
    "NAV ADR 2+3 FAULT",
    "NAV IR FAULT",
    "NAV IR 1 FAULT",
    "NAV IR 2 FAULT"
  ],
  "OVERSPEED": ["OVERSPEED CONDITION"],
  "RECORDER": ["RECORDER FAULT"],
  "SMOKE": [
    "SMOKE FWD CARGO SMOKE",
    "SMOKE COCKPIT SMOKE",
    "SMOKE LAVATORY SMOKE",
    "SMOKE AIR COND SMOKE",
    "SMOKE AVIONICS SMOKE"
  ],
  "SURV": ["SURV SYS FAULT"],
  "T.O": ["T.O WARNING FAULT"],
  "VENT": ["VENT AVNCS SYS FAULT"],
  "WHEEL": ["WHEEL N/W STRG FAULT"],
  "WING A.ICE": [
    "WING A.ICE SYS FAULT",
    "WING A.ICE OPEN ON GND"
  ]
};

/* ===== CHAPTER LIST ===== */
const chapters = [
  "A-ICE", "AIR",
  "APU", "APU FIRE",
  "AUTO FLT", "AVNCS SMOKE",
  "BLEED", "BRAKES",
  "BRAKES-NWS", "CAB PR",
  "C/B", "COM",
  "COND", "CONFIG",
  "DATALINK", "DOOR",
  "ELEC", "ENG",
  "F/CTL", "FUEL",
  "FWS", "HYD",
  "L/G", "MISC",
  "NAV", "OVERSPEED",
  "RECORDER", "SMOKE",
  "SURV", "T.O",
  "VENT", "WHEEL",
  "WING A.ICE"
];

const container = document.getElementById("chapters");

chapters.forEach(name => {
  const b = document.createElement("button");
  b.textContent = name;
  b.className = "btn-grad";
  b.onclick = () => openChapter(name);
  container.appendChild(b);
});

function openChapter(name) {
  showFailures(name);
}

function showFailures(system) {
  const failureList = failures[system] || [];
  
  if (failureList.length === 0) {
    alert("No failures available for " + system);
    return;
  }
  
  let html = failureList.map((failure, index) => {
    const color = getFailureColor(failure);
    return `<button class="failure-btn" style="${color}" onclick="selectFailure('${system}', '${failure}')">${failure}</button>`;
  }).join('');
  
  openFailureModal(system, html);
}

function getFailureColor(failure) {
  const upperFailure = failure.toUpperCase();
  
  // RED: Critical failures
  if (upperFailure.includes('FIRE') || 
      upperFailure.includes('DOWNLOCKED') ||
      upperFailure.includes('SMOKING') ||
      upperFailure.includes('LOSS OF')) {
    return 'background: linear-gradient(to right, #8B0000 0%, #FF0000 51%, #8B0000 100%); box-shadow: 0 0 20px rgba(255, 0, 0, 0.6);';
  }
  
  // ORANGE: Standard failures
  return 'background: linear-gradient(to right, #8B4500 0%, #FF8C00 51%, #8B4500 100%); box-shadow: 0 0 20px rgba(255, 140, 0, 0.6);';
}

function selectFailure(system, failure) {
  // Afficher la page de procédure
  showProcedurePage(system, failure);
  closeFailureModal();
}

function openFailureModal(title, content) {
  document.getElementById('failure-modal-header').textContent = title;
  document.getElementById('failure-modal-body').innerHTML = content;
  document.getElementById('failure-modal').style.display = 'block';
}

function closeFailureModal() {
  document.getElementById('failure-modal').style.display = 'none';
}

function showLegal() {
  openModal("LEGAL NOTICE", `ECAM Builder - A320 Training Tool

Owner and Developer:
Jean-Baptiste Ducros
Email: ducrosjeanbaptiste@gmail.com

Purpose:
This web application is a training tool designed for educational purposes only. It simulates ECAM (Electronic Centralized Aircraft Monitor) displays for Airbus A320 family aircraft to help pilots and aviation enthusiasts practice failure recognition and procedure memorization.

Intellectual Property:
This tool is an independent educational project. All Airbus trademarks, aircraft designations, and ECAM system references remain the property of Airbus S.A.S. This application is not affiliated with, endorsed by, or connected to Airbus S.A.S. or any airline operator.

Data Storage:
This application uses browser local storage to save user-created scenarios. No data is transmitted to external servers. All information remains on the user's device.

Contact:
For questions, feedback, or support, please contact:
ducrosjeanbaptiste@gmail.com`);
}

function showDisclaimer() {
  openModal("DISCLAIMER", `FOR TRAINING AND EDUCATIONAL USE ONLY

This ECAM Builder application is provided "as-is" for educational and training purposes only. By using this tool, you acknowledge and agree to the following:

1. Not for Operational Use
This application is NOT approved for use in actual flight operations, flight training devices (FTD), or flight simulators requiring certification. It is intended solely for personal study and procedure familiarization.

2. Always Refer to Official Documentation
Users must always refer to the latest official Flight Crew Operating Manual (FCOM), Quick Reference Handbook (QRH), and current Operational Engineering Bulletins (OEBs) published by Airbus and their airline operator for accurate and current procedures.

3. Accuracy and Completeness
While every effort has been made to ensure accuracy, this tool may contain errors, omissions, or outdated information. The developer makes no warranties regarding the accuracy, completeness, or reliability of any content.

4. No Liability
The developer assumes no liability for any consequences arising from the use or misuse of this application. Users assume all responsibility for their training and must verify all information through official channels.

5. Not a Substitute for Professional Training
This tool does not replace official flight training, type rating courses, or recurrent training programs. It is a supplementary study aid only.

6. Changes and Updates
Aircraft systems, procedures, and regulations are subject to change. This application may not reflect the most current information. Always verify with official sources.

7. Third-Party Content
Users may upload their own images or content. The developer is not responsible for third-party content uploaded by users.

TERMS OF USE
By using ECAM Builder, you agree that:

• You are using this tool for personal educational purposes only
• You understand this is not certified training material
• You will not use this tool for commercial purposes without permission
• You will verify all procedures with official documentation
• You accept full responsibility for your use of this application`);
}

function showContact() {
  openModal("CONTACT", `Contact:

For questions, feedback, or support, please contact:

ducrosjeanbaptiste@gmail.com`);
}

function openModal(title, content) {
  document.getElementById('modal-header').textContent = title;
  document.getElementById('modal-body').textContent = content;
  document.getElementById('modal').style.display = 'block';
}

function closeModal() {
  document.getElementById('modal').style.display = 'none';
}

window.onclick = function(event) {
  const modal = document.getElementById('modal');
  const failureModal = document.getElementById('failure-modal');
  if (event.target == modal) {
    modal.style.display = 'none';
  }
  if (event.target == failureModal) {
    failureModal.style.display = 'none';
  }
}

/* ===== PROCEDURE PAGE FUNCTIONS ===== */
function showProcedurePage(system, failure) {
  // Hide main app
  document.querySelector('.app').style.display = 'none';
  
  // Show procedure page
  const procedurePage = document.getElementById('procedure-page');
  procedurePage.style.display = 'flex';
  
  // Set title
  document.getElementById('procedure-title').textContent = failure;
  
  // Generate procedure steps (template)
  const stepsContainer = document.getElementById('procedure-steps-container');
  const procedureData = getProcedureData(system, failure);
  
  stepsContainer.innerHTML = procedureData.steps.map((step, index) => `
    <div class="procedure-step ${index === 0 ? 'active' : ''}" id="step-${index}">
      <strong>Step ${index + 1}:</strong> ${step.description}
      ${step.image ? `<button class="procedure-image-button" onclick="showStepImage(${index})">${step.imageLabel || 'View Image'}</button>` : ''}
    </div>
  `).join('');
  
  // Store current procedure data
  window.currentProcedure = {
    system: system,
    failure: failure,
    data: procedureData,
    currentStep: 0
  };
}

function getProcedureData(system, failure) {
  // Template de base pour chaque panne
  // À personnaliser par panne
  const procedures = {
    'ELEC': {
      'ELEC GEN 1 FAULT': {
        steps: [
          { description: 'Verify GEN 1 OFF on overhead panel', image: true, imageLabel: 'Overhead Panel' },
          { description: 'Check electrical system display', image: true, imageLabel: 'E/WD Display' },
          { description: 'Cross-check bus voltage on system display', image: true, imageLabel: 'System Display' },
          { description: 'APU GEN available - switch APU GEN to ON if needed', image: true, imageLabel: 'APU Controls' },
          { description: 'Configure electrical system per QRH', image: false }
        ]
      },
      'ELEC BAT FAULT': {
        steps: [
          { description: 'Check battery status on E/WD', image: true, imageLabel: 'E/WD Display' },
          { description: 'Verify BAT switch position on overhead', image: true, imageLabel: 'Overhead Panel' },
          { description: 'Monitor DC electrical bus voltage', image: true, imageLabel: 'System Display' },
          { description: 'Follow QRH battery fault procedure', image: false }
        ]
      }
    },
    'ENG': {
      'ENG 2 FIRE (IN FLIGHT)': {
        steps: [
          { description: 'Declare MAYDAY - inform ATC of engine fire', image: false },
          { description: 'Select ENG 2 fire switch - DOWN position', image: true, imageLabel: 'Fire Switches' },
          { description: 'Select ENG 2 fire extinguisher - push and turn', image: true, imageLabel: 'Fire Extinguisher' },
          { description: 'Monitor engine shutdown on E/WD', image: true, imageLabel: 'E/WD Display' },
          { description: 'Plan for single engine landing', image: false }
        ]
      }
    }
  };
  
  // Retourner la procédure ou un template par défaut
  if (procedures[system] && procedures[system][failure]) {
    return procedures[system][failure];
  }
  
  // Template par défaut
  return {
    steps: [
      { description: `Identify ${failure} on ECAM display`, image: true, imageLabel: 'ECAM Display' },
      { description: 'Verify failure on system display', image: true, imageLabel: 'System Display' },
      { description: 'Consult Flight Crew Operating Manual (FCOM)', image: false },
      { description: 'Follow appropriate procedure from QRH', image: false },
      { description: 'Monitor recovery and system status', image: true, imageLabel: 'E/WD Display' }
    ]
  };
}

function goBackToMain() {
  document.getElementById('procedure-page').style.display = 'none';
  document.querySelector('.app').style.display = 'flex';
}

function replayAnimation() {
  if (!window.currentProcedure) return;
  
  // Reset to first step
  const stepsContainer = document.getElementById('procedure-steps-container');
  Array.from(stepsContainer.children).forEach((step, index) => {
    step.classList.remove('active', 'completed');
    if (index === 0) {
      step.classList.add('active');
    }
  });
  
  window.currentProcedure.currentStep = 0;
}

function restartSequence() {
  replayAnimation();
  // Reset all progress
  const stepsContainer = document.getElementById('procedure-steps-container');
  Array.from(stepsContainer.children).forEach(step => {
    step.classList.remove('completed');
  });
}

function showStepImage(stepIndex) {
  // Placeholder for step image display
  const step = window.currentProcedure.data.steps[stepIndex];
  alert(`Step ${stepIndex + 1} Image:\n${step.description}`);
}

function markStepAsCompleted(stepIndex) {
  const step = document.getElementById(`step-${stepIndex}`);
  if (step) {
    step.classList.add('completed');
    step.classList.remove('active');
    
    // Move to next step
    const nextStep = document.getElementById(`step-${stepIndex + 1}`);
    if (nextStep) {
      nextStep.classList.add('active');
      window.currentProcedure.currentStep = stepIndex + 1;
    }
  }
}
</script>

</body>
</html>